#include "core/memory.hpp"

const u32 font_special[32] = {
 0x20, 0x2591, 0x2592, 0x2593, 0x2588, 0x2500, 0x2502, 0x250C, 0x2510, 0x2514, 0x2518, 0x251C, 0x2524, 0x252C, 0x2534, 0x253C,
 0x2022, 0xB0, 0xA9, 0xAE, 0x2122, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0xFFFD
};

namespace memory {
 octo raw[SYSTEM::MEMORY];

 void reset() {
  memset(raw, 0, SYSTEM::MEMORY);

  using namespace vm::ram_global;
  using namespace constant;
  zero = 0.0;
  one = 1.0;
  sentinel = fpu(0x80000000, true);
  signature = fpu(0xFACADE32, true);
  pi = 3.14159265358979323846;
  tau = 6.28318530717958647692;
  euler = 2.71828182845904523536;

  for (u32 i = 0; i < 16; i++) {palette[i] = i | 0x80;}
  palette[0] &= 0x7F;

  static constexpr octo font_data[512] = {
   0x0A,0xAF,0xF0,0x40,0x04,0x44,0x40,0x44,0x00,0x55,0xF0,0x40,0x04,0x44,0x40,0x44,
   0x0A,0xAF,0xF0,0x40,0x04,0x44,0x40,0x44,0x00,0x55,0xF0,0x40,0x04,0x44,0x40,0x44,
   0x0A,0xAF,0xFF,0x47,0xC7,0xC7,0xCF,0xFF,0x00,0x55,0xF0,0x44,0x40,0x04,0x44,0x04,
   0x0A,0xAF,0xF0,0x44,0x40,0x04,0x44,0x04,0x00,0x55,0xF0,0x44,0x40,0x04,0x44,0x04,
   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0F,
   0x0E,0xFF,0xE0,0x00,0x00,0x00,0x00,0x09,0x0A,0x99,0x40,0x00,0x00,0x00,0x00,0x0D,
   0x4E,0xBB,0x70,0x00,0x00,0x00,0x00,0x0F,0x00,0x9B,0x70,0x00,0x00,0x00,0x00,0x0B,
   0x00,0xFF,0x50,0x00,0x00,0x00,0x00,0x0F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0F,
   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
   0x04,0xAA,0x4A,0x64,0x24,0xA0,0x00,0x02,0x04,0xAE,0xE6,0xC4,0x42,0x44,0x00,0x02,
   0x00,0x0A,0x4C,0xA0,0x42,0xAE,0x0E,0x04,0x04,0x0E,0xEA,0x60,0x42,0x04,0x40,0x48,
   0x00,0x0A,0x40,0x00,0x24,0x00,0x40,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
   0x6C,0xEE,0xAE,0xEE,0xEE,0x00,0x20,0x8E,0xA4,0x26,0xAC,0x82,0xEA,0x44,0x4E,0x42,
   0xA4,0x42,0xE2,0xE2,0xAE,0x00,0x80,0x20,0xCE,0xEE,0x2E,0xE2,0xE2,0x44,0x4E,0x44,
   0x00,0x00,0x00,0x00,0x00,0x04,0x20,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
   0x4E,0xCE,0xCE,0xEE,0xAE,0x2A,0x8E,0xEE,0xAA,0xE8,0xAC,0x88,0xA4,0x2A,0x8E,0xAA,
   0x8E,0xA8,0xA8,0xCA,0xE4,0xAC,0x8A,0xAA,0x6A,0xEE,0xCE,0x8E,0xAE,0xEA,0xEA,0xAE,
   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
   0xEE,0xEE,0xEA,0xAA,0xAA,0xE6,0x86,0x40,0xAA,0xA8,0x4A,0xAA,0xAA,0x24,0x82,0xA0,
   0xEE,0xC2,0x4A,0xAE,0x4E,0x84,0x42,0x00,0x82,0xAE,0x4E,0x4E,0xA4,0xE4,0x22,0x0E,
   0x00,0x00,0x00,0x00,0x00,0x06,0x26,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
   0x40,0x80,0x20,0x00,0x84,0x48,0x40,0x00,0x26,0xEE,0xEE,0xEE,0xE0,0x0A,0x4E,0xEE,
   0x0A,0xA8,0xAA,0x8A,0xA4,0x4C,0x4E,0xAA,0x0E,0xEE,0xEC,0xCE,0xA4,0x4A,0x6A,0xAE,
   0x00,0x00,0x00,0x86,0x00,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
   0x00,0x00,0x40,0x00,0x00,0x06,0x4C,0x00,0xEE,0xE6,0xEA,0xAA,0xAA,0xC4,0x44,0x60,
   0xAA,0x84,0x4A,0xAE,0x4A,0x4C,0x46,0xC0,0xEE,0x8C,0x6E,0x4E,0xAE,0x64,0x44,0x00,
   0x82,0x00,0x00,0x00,0x06,0x06,0x4C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  };
  memcpy(font, font_data, 512);
 }
}